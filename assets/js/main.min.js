let tradeName, gstnNumber;

// .then(tradeName = data.tradeName);

/*scroll down animation*/

$(function() {
    $('.scroll-down').click (function() {
      $('html, body').animate({scrollTop: $('section.ok').offset().top }, 'slow');
      return false;
    });
  });
/*scroll down animation*/




// swiper
var swiper = new Swiper(".mySwiper", {
    // direction: "vertical",
    effect: "fade",
    loop: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true
    },
    autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
  });
  var swiper = new Swiper(".mySwiper1", {
    grabCursor: true,
    effect: "creative",
    loop: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true
    },
    autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
    creativeEffect: {
      prev: {
        shadow: false,
        translate: [0, 0, -400]
      },
      next: {
        translate: ["100%", 0, 0]
      }
    }
  });

//   swiper

// AOS.init();

// (function() {
//   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
//   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
//   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
// })();
$(function () {
  var fx = function fx() {
  $(".stat-number").each(function (i, el) {
      var data = parseInt(this.dataset.n, 10);
      var props = {
          "from": {
              "count": 0
          },
              "to": { 
              "count": data
          }
      };
      $(props.from).animate(props.to, {
          duration: 1000 * 1,
          step: function (now, fx) {
              $(el).text(Math.ceil(now));
          },
          complete:function() {
              if (el.dataset.sym !== undefined) {
                el.textContent = el.textContent.concat(el.dataset.sym)
              }
          }
      });
  });
  };
  
  var reset = function reset() {
      //console.log($(this).scrollTop())
      if ($(this).scrollTop() > 0) {
          $(this).off("scroll");
        fx()
      }
  };
  
  $(window).on("scroll", reset);
});

// let dhover = document.querySelector('.flexbox-slider');
// let hover = document.querySelector('.flexbox-slide');
// let hoverClass = document.querySelector('.hoverclass');
// let removeClass = () => {
//     // debugger;
//     hover.classList.remove('flexbox-slide-1');
// }
// let addClass = () => {
//     // debugger;
//     hoverClass.classList.add('flexbox-slide-1');
// }
// hover.addEventListener("mouseover", removeClass);
// dhover.addEventListener("mouseout", addClass);

const button = document.querySelector('#submitGstin');
let validateNumber = () => {
    let gstn = document.querySelector('#inputGstinOne').value;
    // debugger;
    document.querySelector('#inputGstinOne').classList.remove("error");
    if (gstn.length == 0 || gstn ==""){
// console.log(gstn.length);
document.querySelector('#inputGstinOne').focus();
// document.querySelector('#inputGstinOne').classList.add("error");
document.querySelector('#existUser').innerHTML = "Please enter GSTIN number";
setTimeout(function(){
  document.getElementById("existUser").innerHTML = '';
}, 3000);
document.querySelector('#inputGstinOne').value = "";
console.log('empty')
return false;
}
else if(gstn.length <= 14){
    console.log(gstn.length);
    document.querySelector('#inputGstinOne').classList.add("error");
    return false;
}
else{
    // debugger;
    fetch('https://qa-backend.jitfin.co/api/anchor/find?gstin=' + gstn,{
    method: 'GET'
})
.then(res => {
    if(res.ok){
        // debugger;
       return res.json()
        console.log('success');
    }
    else{
      debugger;
      document.querySelector('#existUser').innerHTML = "Enter correct GSTIN number";
        setTimeout(function(){
            document.getElementById("existUser").innerHTML = '';
        }, 3000);
        document.querySelector('#inputGstinOne').value = "";
        document.querySelector('#inputGstinOne').focus();
        console.log('Not success');
        return false;
        
    }
})
.then(data => {
    // debugger;
    console.log(data);
    let dataValidate = data.message;
    // console.log(dataValidate);
    if(dataValidate.includes("exists")){
      // debugger;
        console.log("already exists user");
        // let exsistuser = document.querySelector('#exsistuser');
        // let msg ="User already exists";
        document.querySelector('#existUser').innerHTML = "User already exists";
        setTimeout(function(){
            document.getElementById("existUser").innerHTML = '';
        }, 3000);
        document.querySelector('#inputGstinOne').value = "";
        document.querySelector('#inputGstinOne').focus();
        return false;
    }
    else
    {
        tradeName = data.tradeName;
    gstnNumber = gstn;
    console.log(tradeName);
    
    localStorage.setItem("tradeName", tradeName);
    localStorage.setItem("gstnNumber", gstnNumber);
    window.location.href = "/register.html";
    }
}
)
    console.log('valid');
    return true;
}
}
button.addEventListener('click', validateNumber);